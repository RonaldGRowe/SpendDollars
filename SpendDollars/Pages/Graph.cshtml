@page

@model SpendDollars.Pages.GraphModel
@{
    ViewData["Title"] = "Graph";   
}



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


    <script type="text/javascript">


        
   

      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
          var average = [['Investment', 'Amount']];
        fetch("/api/moneyspent")
              .then((response) => {
                  return response.json();
              })
              .then((info) => {
                  averages = info;
                  for (var i in info) {
                      average.push([i, info[i]]);
                  }
                  
              })
          

          var data = new google.visualization.arrayToDataTable(average);

        
       
          
          var options = {
          title: 'My Daily Activities',
          backgroundColor: '#3A6B35'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>
    

<h1 class="h1">How Did We Spend &#36;100 a Day?</h1>

<div id="piechart" class="green" style=" width: 100%; height: 500px;"></div>

@if(Model.DBCount != null)
{
    
    <p class="text-center">The Total Number of Entries is @Model.DBCount</p>
}
else
    {
        <h2>Need Data, Please Return and Fill Out Form</h2>
    }

